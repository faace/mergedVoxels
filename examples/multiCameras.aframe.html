<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>multiCameras</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <!-- <script src="https://faace.github.io/aFrameByCode/dist/aFrameByCode.min.js"></script> -->
    <script src="../dist/aFrameByCode.js"></script>
    <script src="./js/superTouchForVoxels.js"></script>
    <script src="../src/mvPly2Map.js"></script>
    <script src="../src/Voxels.js"></script>
    <script src="../src/Voxels.aframe.js"></script>
</head>

<body>
    <script>
        AFRAME.createAScene({
            id: 'scene1',
            createTrigger: function (father, map, position, size, faces) {
                var item1 = father.addAnEntity('a-voxels#mapWater', {
                    map: map,
                    // opacities: '#ffffff_0.6',
                    align: 'center bottom center',
                    width: size,
                    height: size,
                    depth: size,
                    position: position,
                    type: 'item',
                    faces: faces,
                });

                return item1;
            },
            onInit: function (scene) {
                scene.assets.addList({
                    'img#floor2': './img/floor2.jpg',
                    'img#floor3': './img/floor3.jpg',
                });
                scene.addEntities('<a-entity light="color: #333; type: ambient"></a-entity>');
                var size = this.size = 0.1;
                var entity = scene.addAnEntity('a-entity#building', {
                    'super-touch': 'rotationX:-30 30;rotationZ:-30 30;scale:1 5', 'position': '0 -3 -3', rotation: '0 0 0',
                    'voxels-sys': 'touchTarget:#building;rotationX:-30 30;rotationZ:-30 30;scale:1 5'
                });
                var map = entity.addAnEntity('a-voxels#map', {
                    src: '../ply/skull.ply',
                    textures: '#111111_floor3,#no_444444_floor2',
                    opacities: '#3300cc_0.6',
                    // align: 'center bottom center',
                    width: size,
                    height: size,
                    depth: size,
                    type: 'map',
                });
                // this.hero = entity.addAnEntity('a-entity',"")
                this.chick = entity.addAnEntity('a-voxels#chick', {
                    src: '../ply/chick.ply;../ply/chick1.ply;../ply/chick2.ply',
                    anims: 'stand:0;walk:1,2',
                    // align: 'center bottom center',
                    'cell-size': size,
                    position: '-2 5 15',
                    type: 'hero',
                });
                this.chick.addAnEntity('a-entity', {
                    light: "type:spot;intensity: 0.6; castShadow: true",
                    position: "0 0.141 0",
                    rotation: '0 180 0'
                });


                this.camera1 = scene.addAnEntity('a-entity', { camera: '', 'position2': '0 5.6 -2', rotation: '-25 0 0' });
                scene.addAnEntity('a-sky', { color: "#aCaCEC" });

            },
            onLoaded: function (scene) {
                // this.camera2 = this.chick.addAnEntity('a-entity', { camera: '', 'position': '0 ' + this.size + ' 0', rotation: '0 180 0' });

                scene.systems.voxels.addHeroCamera(this.camera1);
            }
        });
        AFRAME.loadScene('scene1');

    </script>
</body>

</html>